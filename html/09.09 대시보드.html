<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가람포스텍 Smart POS AI 관리센터</title>

    <!-- 폰트 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <style>
        :root {
            --primary-color: #1e60e1;
            --primary-dark: #1a54c7;
            --primary-light: rgba(30, 96, 225, 0.1);
            --accent-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --secondary-color: #f8f9fa;
            --bg-white: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --border-color: #e9ecef;
            --border-radius: 6px;
            --border-radius-lg: 12px;
            --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            --shadow-md: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
            --transition: all 0.2s ease-in-out;
            --header-height: 80px;
        }

        /* 기본 리셋 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f8fafc;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* 로딩 오버레이 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }

        .loading-content {
            text-align: center;
            color: var(--text-primary);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }

        /* 왼쪽 사이드바 - 09.09 분석 보고서 스타일 기준 */
        .sidebar {
            width: 280px;
            background: #1e293b;
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid #334155;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .brand-logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            border-radius: var(--border-radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .brand-info {
            flex: 1;
        }

        .brand-name {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: white;
        }

        .brand-subtitle {
            font-size: 0.875rem;
            color: #94a3b8;
        }

        .sidebar-nav {
            padding: 1.5rem 0;
            flex: 1;
        }

        .nav-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-item {
            margin-bottom: 0.25rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: #cbd5e1;
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .nav-link:hover {
            background: #334155;
            color: white;
        }

        .nav-link.active {
            background: var(--primary-color);
            color: white;
            border-right: 3px solid var(--primary-light);
        }

        .sidebar-footer {
            margin-top: auto;
            padding: 1.5rem;
            border-top: 1px solid #334155;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            color: white;
            font-size: 0.875rem;
        }

        .user-email {
            font-size: 0.75rem;
            color: #94a3b8;
        }

        .sidebar-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: #334155;
            color: #cbd5e1;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .action-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* 메인 컨텐트 */
        .main-content {
            flex: 1;
            margin-left: 280px;
            background: #f8fafc;
        }

        .admin-wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* 사이드바 토글 버튼 숨기기 (데스크톱에서) */
        .sidebar-toggle {
            display: none;
        }

        /* 상단 헤더 */
        .top-header {
            background: var(--bg-white);
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .mobile-menu-btn {
            display: none;
            width: 40px;
            height: 40px;
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background: var(--secondary-color);
        }

        .page-title h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .page-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .header-stats {
            display: flex;
            gap: 1.5rem;
        }

        .stat-item {
            text-align: right;
        }

        .stat-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .stat-value {
            font-size: 0.875rem;
            font-weight: 600;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-indicator.online .status-dot {
            background: var(--accent-color);
        }

        .status-indicator.offline .status-dot {
            background: var(--danger-color);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-text {
            font-size: 0.875rem;
            font-weight: 500;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .refresh-btn {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border: none;
            border-radius: var(--border-radius);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .refresh-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .refresh-btn.spinning {
            animation: spin 1s linear infinite;
        }

        /* 메인 콘텐츠 섹션 */
        .main-content section {
            margin-bottom: 2rem;
            padding: 0 2rem;
        }

        .main-content section:first-of-type {
            margin-top: 2rem;
        }

        /* 메트릭 카드 섹션 */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .metric-card {
            background: var(--bg-white);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-color);
            transition: var(--transition);
        }

        .metric-card.primary::before {
            background: var(--primary-color);
        }

        .metric-card.success::before {
            background: var(--accent-color);
        }

        .metric-card.warning::before {
            background: var(--warning-color);
        }

        .metric-card.danger::before {
            background: var(--danger-color);
        }

        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .metric-icon {
            width: 70px;
            height: 70px;
            border-radius: var(--border-radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            flex-shrink: 0;
        }

        .metric-card.primary .metric-icon {
            background: rgba(30, 96, 225, 0.1);
            color: var(--primary-color);
        }

        .metric-card.success .metric-icon {
            background: rgba(40, 167, 69, 0.1);
            color: var(--accent-color);
        }

        .metric-card.warning .metric-icon {
            background: rgba(255, 193, 7, 0.1);
            color: var(--warning-color);
        }

        .metric-card.danger .metric-icon {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger-color);
        }

        .metric-content {
            flex: 1;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .metric-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            font-weight: 500;
        }

        .metric-change {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .metric-change.positive {
            color: var(--accent-color);
        }

        .metric-change.negative {
            color: var(--danger-color);
        }

        .metric-change.neutral {
            color: var(--text-secondary);
        }

        .metric-change small {
            font-weight: 400;
            opacity: 0.8;
        }

        /* 차트 섹션 */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-card {
            background: var(--bg-white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chart-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
        }

        .chart-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chart-period {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background: var(--bg-white);
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
        }

        .chart-action {
            width: 36px;
            height: 36px;
            background: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .chart-action:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .chart-legend {
            display: flex;
            gap: 1rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .chart-container {
            padding: 1.5rem;
            height: 300px;
            position: relative;
        }

        .chart-card.full-width .chart-container {
            height: 200px;
        }

        /* 활동 섹션 */
        .activity-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .activity-card {
            background: var(--bg-white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .activity-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .activity-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
        }

        .view-all-link {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: var(--transition);
        }

        .view-all-link:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        .mark-all-read {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 0.875rem;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .mark-all-read:hover {
            background: var(--primary-light);
        }

        .activity-content {
            padding: 1rem;
        }

        /* 대화 목록 */
        .conversation-list {
            display: flex;
            flex-direction: column;
        }

        .conversation-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .conversation-item:hover {
            background: var(--secondary-color);
        }

        .conversation-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(30, 96, 225, 0.1);
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .conversation-content {
            flex: 1;
            min-width: 0;
        }

        .conversation-text {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .conversation-meta {
            display: flex;
            align-items: center;
            font-size: 0.875rem;
        }

        .conversation-time {
            color: var(--text-secondary);
        }

        /* 알림 목록 */
        .notification-list {
            display: flex;
            flex-direction: column;
        }

        .notification-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
            position: relative;
        }

        .notification-item.unread {
            background: rgba(30, 96, 225, 0.05);
        }

        .notification-item.unread::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--primary-color);
        }

        .notification-item:hover {
            background: var(--secondary-color);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1.125rem;
        }

        .notification-icon.success {
            background: rgba(40, 167, 69, 0.1);
            color: var(--accent-color);
        }

        .notification-icon.warning {
            background: rgba(255, 193, 7, 0.1);
            color: var(--warning-color);
        }

        .notification-icon.info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
        }

        .notification-content {
            flex: 1;
            min-width: 0;
        }

        .notification-text {
            font-weight: 500;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .notification-time {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* 애니메이션 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metric-card,
        .chart-card,
        .activity-card {
            animation: fadeInUp 0.5s ease-out;
        }

        .metric-card:nth-child(1) { animation-delay: 0.1s; }
        .metric-card:nth-child(2) { animation-delay: 0.2s; }
        .metric-card:nth-child(3) { animation-delay: 0.3s; }
        .metric-card:nth-child(4) { animation-delay: 0.4s; }

        /* 차트 로딩 상태 */
        .chart-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
        }

        .chart-loading i {
            margin-right: 0.5rem;
            animation: spin 1s linear infinite;
        }

        /* 반응형 */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .activity-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 1024px) {
            .main-content { 
                margin-left: 0; 
            }
            
            .sidebar { 
                transform: translateX(-100%); 
                transition: transform 0.3s ease; 
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .sidebar-toggle {
                display: flex;
                width: 32px;
                height: 32px;
                border: none;
                background: none;
                color: #cbd5e1;
                cursor: pointer;
                align-items: center;
                justify-content: center;
                border-radius: var(--border-radius);
                transition: var(--transition);
            }
            
            .sidebar-toggle:hover {
                background: #334155;
            }
            
            .mobile-menu-btn {
                display: flex;
            }

            .header-stats {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-content section {
                padding: 0 1rem;
                margin-bottom: 1.5rem;
            }

            .main-content section:first-of-type {
                margin-top: 1.5rem;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .metric-card {
                padding: 1.5rem;
                gap: 1rem;
            }

            .metric-icon {
                width: 60px;
                height: 60px;
                font-size: 1.75rem;
            }

            .metric-value {
                font-size: 2rem;
            }

            .chart-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .chart-controls {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .chart-container {
                padding: 1rem;
                height: 250px;
            }

            .activity-header {
                padding: 1rem;
            }

            .top-header {
                padding: 0 1rem;
            }

            .page-title h1 {
                font-size: 1.25rem;
            }

            .sidebar-header {
                padding: 1rem;
            }

            .sidebar-footer {
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            .metric-card {
                flex-direction: column;
                text-align: center;
                padding: 1.25rem;
            }

            .metric-change {
                justify-content: center;
            }

            .chart-legend {
                flex-direction: column;
                gap: 0.5rem;
            }

            .conversation-item,
            .notification-item {
                padding: 0.75rem;
                gap: 0.75rem;
            }

            .conversation-avatar,
            .notification-icon {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }

            .header-right {
                gap: 0.75rem;
            }

            .refresh-btn {
                width: 35px;
                height: 35px;
            }

            .page-subtitle {
                display: none;
            }
        }

        /* 접근성 */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* 포커스 스타일 */
        button:focus,
        a:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* 선택 스타일 */
        ::selection {
            background: var(--primary-light);
            color: var(--primary-dark);
        }
    </style>
</head>

<body>
    <!-- 로딩 오버레이 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>관리자 시스템 로딩 중...</p>
        </div>
    </div>

    <!-- 메인 래퍼 -->
    <div class="admin-wrapper">
        <!-- 사이드바 -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand-logo">
                    <i class="fas fa-microchip"></i>
                </div>
                <div class="brand-info">
                    <h2 class="brand-name">가람포스텍</h2>
                    <p class="brand-subtitle">AI 관리센터</p>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="09.09 대시보드.html" class="nav-link active">
                            <i class="fas fa-tachometer-alt"></i>
                            <span class="nav-text">대시보드</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="09.09 지식베이스 관리.html" class="nav-link">
                            <i class="fas fa-book"></i>
                            <span class="nav-text">지식베이스 관리</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="09.09 AI 모델 설정.html" class="nav-link">
                            <i class="fas fa-robot"></i>
                            <span class="nav-text">AI 모델 설정</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="09.09 분석 및 보고서.html" class="nav-link">
                            <i class="fas fa-chart-bar"></i>
                            <span class="nav-text">분석 및 보고서</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="09.09 챗봇 운영 설정.html" class="nav-link">
                            <i class="fas fa-comments"></i>
                            <span class="nav-text">챗봇 운영 설정</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="09.15 문의 관리.html" class="nav-link">
                            <i class="fas fa-comments"></i>
                            <span class="nav-text">문의 관리</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name">관리자</div>
                        <div class="user-email">admin@garampos.com</div>
                    </div>
                </div>
                <div class="sidebar-actions">
                    <button class="action-btn" title="로그아웃">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- 메인 콘텐츠 -->
        <main class="main-content">
            <!-- 상단 헤더 -->
            <header class="top-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="page-title">
                        <h1>대시보드</h1>
                        <p class="page-subtitle">Smart POS AI 기술지원 현황</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-stats">
                        <div class="stat-item">
                            <span class="stat-label">시스템 상태</span>
                            <div class="status-indicator online">
                                <span class="status-dot"></span>
                                <span class="status-text">정상</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">마지막 업데이트</span>
                            <span class="stat-value" id="lastUpdate">방금 전</span>
                        </div>
                    </div>
                    <button class="refresh-btn" id="refreshBtn" title="새로고침">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </header>

            <!-- 메트릭 카드 섹션 -->
            <section class="metrics-section">
                <div class="metrics-grid">
                    <div class="metric-card primary">
                        <div class="metric-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="totalConversations">1,247</div>
                            <div class="metric-label">이 문의 수</div>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+15.3%</span>
                                <small>지난주 대비</small>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card success">
                        <div class="metric-icon">
                            <i class="fas fa-thumbs-up"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="satisfactionRate">91.4%</div>
                            <div class="metric-label">사용자 만족도</div>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+3.2%</span>
                                <small>지난주 대비</small>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card warning">
                        <div class="metric-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="avgResponseTime">1.8초</div>
                            <div class="metric-label">평균 응답시간</div>
                            <div class="metric-change neutral">
                                <i class="fas fa-minus"></i>
                                <span>-0.2초</span>
                                <small>지난주 대비</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 차트 섹션 -->
            <section class="charts-section">
                <div class="charts-grid">
                    <!-- 일일 문의량 트렌드 -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">일일 문의량 트렌드</h3>
                            <div class="chart-controls">
                                <select class="chart-period" id="trendPeriod">
                                    <option value="7">지난 7일</option>
                                    <option value="30" selected>지난 30일</option>
                                    <option value="90">지난 90일</option>
                                </select>
                                <button class="chart-action" title="차트 다운로드">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>

                    <!-- 피드백 기반 만족도 분포 -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">사용자 피드백 분포</h3>
                            <div class="chart-controls">
                                <button class="chart-action" title="차트 다운로드">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="feedbackChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 시간대별 사용량 -->
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3 class="chart-title">시간대별 사용량</h3>
                        <div class="chart-controls">
                            <div class="chart-legend">
                                <span class="legend-item">
                                    <span class="legend-color" style="background: #1e60e1;"></span>
                                    문의량
                                </span>
                                <span class="legend-item">
                                    <span class="legend-color" style="background: #28a745;"></span>
                                    만족도
                                </span>
                            </div>
                            <button class="chart-action" title="차트 다운로드">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="hourlyChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- 최근 활동 섹션 -->
            <section class="activity-section">
                <div class="activity-grid">
                    <!-- 최근 대화 -->
                    <div class="activity-card">
                        <div class="activity-header">
                            <h3 class="activity-title">최근 대화</h3>
                            <a href="분석 및 보고서.html" class="view-all-link">전체 보기</a>
                        </div>
                        <div class="activity-content">
                            <div class="conversation-list" id="recentConversations">
                                <div class="conversation-item">
                                    <div class="conversation-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="conversation-content">
                                        <div class="conversation-text">POS 시스템이 갑자기 꺼졌어요</div>
                                        <div class="conversation-meta">
                                            <span class="conversation-time">5분 전</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="conversation-item">
                                    <div class="conversation-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="conversation-content">
                                        <div class="conversation-text">키오스크 터치가 안 돼요</div>
                                        <div class="conversation-meta">
                                            <span class="conversation-time">12분 전</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="conversation-item">
                                    <div class="conversation-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="conversation-content">
                                        <div class="conversation-text">카드 결제가 안 됩니다</div>
                                        <div class="conversation-meta">
                                            <span class="conversation-time">18분 전</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // 사이드바 관련 기능
        class SidebarManager {
            constructor() {
                this.sidebar = document.getElementById('sidebar');
                this.sidebarToggle = document.getElementById('sidebarToggle');
                this.mobileMenuBtn = document.getElementById('mobileMenuBtn');
                this.refreshBtn = document.getElementById('refreshBtn');
                this.markAllReadBtn = document.getElementById('markAllRead');
                this.lastUpdateElement = document.getElementById('lastUpdate');
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.updateLastUpdate();
                this.setCurrentPage();
                this.loadMetricsFromStorage();
            }

            bindEvents() {
                // 사이드바 토글 (데스크톱)
                if (this.sidebarToggle) {
                    this.sidebarToggle.addEventListener('click', () => this.toggleSidebar());
                }

                // 모바일 메뉴 토글
                if (this.mobileMenuBtn) {
                    this.mobileMenuBtn.addEventListener('click', () => this.toggleMobileSidebar());
                }

                // 새로고침 버튼
                if (this.refreshBtn) {
                    this.refreshBtn.addEventListener('click', () => this.refreshData());
                }

                // 모든 알림 읽음 처리
                if (this.markAllReadBtn) {
                    this.markAllReadBtn.addEventListener('click', () => this.markAllNotificationsRead());
                }

                // 사이드바 외부 클릭 시 닫기 (모바일)
                document.addEventListener('click', (e) => {
                    if (window.innerWidth <= 1024 && this.sidebar?.classList.contains('mobile-open')) {
                        if (!this.sidebar.contains(e.target) && !this.mobileMenuBtn?.contains(e.target)) {
                            this.closeMobileSidebar();
                        }
                    }
                });

                // 윈도우 리사이즈 이벤트
                window.addEventListener('resize', () => this.handleResize());

                // 키보드 단축키
                document.addEventListener('keydown', (e) => this.handleKeyboardShortcuts(e));
            }

            toggleSidebar() {
                if (this.sidebar) {
                    this.sidebar.classList.toggle('collapsed');
                    
                    const isCollapsed = this.sidebar.classList.contains('collapsed');
                    localStorage.setItem('garampos_sidebar_collapsed', isCollapsed);
                    
                    const icon = this.sidebarToggle?.querySelector('i');
                    if (icon) {
                        icon.className = isCollapsed ? 'fas fa-chevron-right' : 'fas fa-chevron-left';
                    }
                }
            }

            toggleMobileSidebar() {
                if (this.sidebar) {
                    this.sidebar.classList.toggle('mobile-open');
                    
                    if (this.sidebar.classList.contains('mobile-open')) {
                        document.body.style.overflow = 'hidden';
                    } else {
                        document.body.style.overflow = '';
                    }
                }
            }

            closeMobileSidebar() {
                if (this.sidebar) {
                    this.sidebar.classList.remove('mobile-open');
                    document.body.style.overflow = '';
                }
            }

            handleResize() {
                if (window.innerWidth > 1024) {
                    this.closeMobileSidebar();
                    
                    const isCollapsed = localStorage.getItem('garampos_sidebar_collapsed') === 'true';
                    if (isCollapsed && this.sidebar) {
                        this.sidebar.classList.add('collapsed');
                    }
                }
            }

            handleKeyboardShortcuts(e) {
                if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
                    e.preventDefault();
                    if (window.innerWidth > 1024) {
                        this.toggleSidebar();
                    } else {
                        this.toggleMobileSidebar();
                    }
                }

                if (e.key === 'Escape' && this.sidebar?.classList.contains('mobile-open')) {
                    this.closeMobileSidebar();
                }

                if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                    e.preventDefault();
                    this.refreshData();
                }
            }

            setCurrentPage() {
                const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                const navLinks = document.querySelectorAll('.nav-link');
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    const href = link.getAttribute('href');
                    if (href === currentPage || (currentPage === '' && href === 'index.html')) {
                        link.classList.add('active');
                    }
                });
            }

            updateLastUpdate() {
                if (this.lastUpdateElement) {
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString('ko-KR', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    this.lastUpdateElement.textContent = timeStr;
                }
            }

            loadMetricsFromStorage() {
                const chatbotMetrics = JSON.parse(localStorage.getItem('chatbotMetrics') || '{}');
                const feedbackData = JSON.parse(localStorage.getItem('feedbackData') || '{}');
                
                const totalConversations = chatbotMetrics.totalConversations || 1247;
                const totalFeedback = feedbackData.total || 0;
                const helpful = feedbackData.helpful || 0;
                
                let satisfactionRate = 91.4;
                if (totalFeedback > 0) {
                    satisfactionRate = ((helpful / totalFeedback) * 100).toFixed(1);
                }

                const accuracyData = chatbotMetrics.categoryAccuracy || {};
                let totalAccuracy = 0;
                let accuracyCount = 0;
                
                Object.values(accuracyData).forEach(cat => {
                    if (cat.total > 0) {
                        totalAccuracy += (cat.correct / cat.total) * 100;
                        accuracyCount++;
                    }
                });
                
                let firstResponseAccuracy = 89.2;
                if (accuracyCount > 0) {
                    firstResponseAccuracy = (totalAccuracy / accuracyCount).toFixed(1);
                }

                this.updateMetricDisplay('totalConversations', totalConversations);
                this.updateMetricDisplay('satisfactionRate', satisfactionRate + '%');
                this.updateMetricDisplay('firstResponseAccuracy', firstResponseAccuracy + '%');
            }

            updateMetricDisplay(id, value) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            }

            refreshData() {
                if (this.refreshBtn) {
                    this.refreshBtn.classList.add('spinning');
                    
                    this.performDataRefresh().then(() => {
                        this.refreshBtn.classList.remove('spinning');
                        this.updateLastUpdate();
                        this.showNotification('데이터가 새로고침되었습니다.', 'success');
                    }).catch((error) => {
                        this.refreshBtn.classList.remove('spinning');
                        this.showNotification('새로고침 중 오류가 발생했습니다.', 'error');
                        console.error('Refresh error:', error);
                    });
                }
            }

            async performDataRefresh() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        this.loadMetricsFromStorage();
                        this.updateMetrics();
                        resolve();
                    }, 1000);
                });
            }

            updateMetrics() {
                this.loadMetricsFromStorage();
                
                if (window.chartManager) {
                    window.chartManager.updateChartsWithStoredData();
                }
            }

            markAllNotificationsRead() {
                const unreadNotifications = document.querySelectorAll('.notification-item.unread');
                
                unreadNotifications.forEach(notification => {
                    notification.classList.remove('unread');
                });

                this.showNotification('모든 알림을 읽음 처리했습니다.', 'success');
            }

            showNotification(message, type = 'info', duration = 3000) {
                const existingNotification = document.querySelector('.admin-notification');
                if (existingNotification) {
                    existingNotification.remove();
                }

                const notification = document.createElement('div');
                notification.className = `admin-notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-content">
                        <i class="fas ${this.getNotificationIcon(type)}"></i>
                        <span>${message}</span>
                    </div>
                    <button class="notification-close">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                Object.assign(notification.style, {
                    position: 'fixed',
                    top: '20px',
                    right: '20px',
                    padding: '1rem 1.5rem',
                    borderRadius: '8px',
                    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',
                    zIndex: '10000',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'space-between',
                    gap: '1rem',
                    minWidth: '300px',
                    maxWidth: '500px',
                    opacity: '0',
                    transform: 'translateX(100%)',
                    transition: 'all 0.3s ease'
                });

                const colors = {
                    success: { bg: '#d4edda', color: '#155724', border: '#c3e6cb' },
                    error: { bg: '#f8d7da', color: '#721c24', border: '#f5c6cb' },
                    warning: { bg: '#fff3cd', color: '#856404', border: '#ffeaa7' },
                    info: { bg: '#d1ecf1', color: '#0c5460', border: '#bee5eb' }
                };

                const colorScheme = colors[type] || colors.info;
                Object.assign(notification.style, {
                    backgroundColor: colorScheme.bg,
                    color: colorScheme.color,
                    border: `1px solid ${colorScheme.border}`
                });

                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.opacity = '1';
                    notification.style.transform = 'translateX(0)';
                }, 10);

                const closeBtn = notification.querySelector('.notification-close');
                const closeNotification = () => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                };

                closeBtn.addEventListener('click', closeNotification);

                if (duration > 0) {
                    setTimeout(closeNotification, duration);
                }
            }

            getNotificationIcon(type) {
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                return icons[type] || icons.info;
            }
        }

        // 차트 초기화 클래스
        class ChartManager {
            constructor() {
                this.charts = {};
                this.initCharts();
            }

            initCharts() {
                try {
                    this.initTrendChart();
                    this.initFeedbackChart();
                    this.initHourlyChart();
                } catch (error) {
                    console.error('차트 초기화 중 오류:', error);
                }
            }

            initTrendChart() {
                const ctx = document.getElementById('trendChart');
                if (!ctx || typeof Chart === 'undefined') {
                    console.warn('trendChart 캔버스를 찾을 수 없거나 Chart.js가 로드되지 않았습니다.');
                    return;
                }

                try {
                    const chatbotMetrics = JSON.parse(localStorage.getItem('chatbotMetrics') || '{}');
                    const dailyData = chatbotMetrics.dailyData || {};

                    const labels = [];
                    const data = [];
                    
                    for (let i = 29; i >= 0; i--) {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        const dateStr = date.toDateString();
                        
                        labels.push(date.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' }));
                        data.push(dailyData[dateStr] || Math.floor(Math.random() * 50) + 10);
                    }

                    this.charts.trend = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: '일일 문의 수',
                                data: data,
                                borderColor: '#1e60e1',
                                backgroundColor: 'rgba(30, 96, 225, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: '#e9ecef'
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('트렌드 차트 초기화 오류:', error);
                }
            }

            initFeedbackChart() {
                const ctx = document.getElementById('feedbackChart');
                if (!ctx || typeof Chart === 'undefined') {
                    console.warn('feedbackChart 캔버스를 찾을 수 없거나 Chart.js가 로드되지 않았습니다.');
                    return;
                }

                try {
                    const feedbackData = JSON.parse(localStorage.getItem('feedbackData') || '{}');
                    const helpful = feedbackData.helpful || 456;
                    const notHelpful = feedbackData.notHelpful || 52;
                    const noResponse = Math.max(0, (feedbackData.total || 508) - helpful - notHelpful);

                    this.charts.feedback = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['도움됨', '도움안됨', '미응답'],
                            datasets: [{
                                data: [helpful, notHelpful, noResponse],
                                backgroundColor: [
                                    '#28a745',
                                    '#dc3545',
                                    '#6c757d'
                                ],
                                borderWidth: 2,
                                borderColor: '#fff'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        padding: 20,
                                        usePointStyle: true
                                    }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('피드백 차트 초기화 오류:', error);
                }
            }

            initHourlyChart() {
                const canvas = document.getElementById('hourlyChart');
                if (!canvas || typeof Chart === 'undefined') {
                    console.warn('hourlyChart 캔버스를 찾을 수 없거나 Chart.js가 로드되지 않았습니다.');
                    return;
                }
                
                try {
                    const ctx = canvas.getContext('2d');
                    if (!ctx) {
                        console.error('hourlyChart의 2D 컨텍스트를 가져올 수 없습니다.');
                        return;
                    }

                    const chatbotMetrics = JSON.parse(localStorage.getItem('chatbotMetrics') || '{}');
                    const hourlyData = chatbotMetrics.hourlyData || {};

                    const hours = [];
                    const inquiries = [];
                    const satisfactionRates = [];

                    for (let i = 0; i < 24; i++) {
                        hours.push(`${i}:00`);
                        inquiries.push(hourlyData[i] || Math.floor(Math.random() * 30) + 5);
                        satisfactionRates.push(Math.floor(Math.random() * 20) + 80);
                    }

                    this.charts.hourly = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: hours,
                            datasets: [{
                                label: '문의량',
                                data: inquiries,
                                backgroundColor: 'rgba(30, 96, 225, 0.8)',
                                yAxisID: 'y'
                            }, {
                                label: '만족도 (%)',
                                data: satisfactionRates,
                                type: 'line',
                                borderColor: '#28a745',
                                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                                yAxisID: 'y1',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            interaction: {
                                mode: 'index',
                                intersect: false,
                            },
                            scales: {
                                x: {
                                    grid: {
                                        display: false
                                    }
                                },
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    grid: {
                                        color: '#e9ecef'
                                    },
                                    title: {
                                        display: true,
                                        text: '문의 수'
                                    }
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    grid: {
                                        drawOnChartArea: false,
                                    },
                                    title: {
                                        display: true,
                                        text: '만족도 (%)'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    display: false
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('시간별 차트 초기화 오류:', error);
                }
            }

            updateTrendPeriod(days) {
                if (!this.charts.trend) {
                    console.warn('트렌드 차트가 초기화되지 않았습니다.');
                    return;
                }

                try {
                    const chatbotMetrics = JSON.parse(localStorage.getItem('chatbotMetrics') || '{}');
                    const dailyData = chatbotMetrics.dailyData || {};

                    const labels = [];
                    const data = [];
                    for (let i = days - 1; i >= 0; i--) {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        const dateStr = date.toDateString();
                        
                        labels.push(date.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' }));
                        data.push(dailyData[dateStr] || Math.floor(Math.random() * 50) + 10);
                    }

                    this.charts.trend.data.labels = labels;
                    this.charts.trend.data.datasets[0].data = data;
                    this.charts.trend.update();
                } catch (error) {
                    console.error('트렌드 차트 업데이트 오류:', error);
                }
            }

            updateChartsWithStoredData() {
                try {
                    this.initTrendChart();
                    this.initFeedbackChart();
                    this.initHourlyChart();
                } catch (error) {
                    console.error('차트 업데이트 중 오류:', error);
                }
            }
        }

        // 메트릭 시뮬레이션 클래스 - 현실적인 시뮬레이션
        class MetricsSimulator {
            constructor() {
                this.initializeData();
                this.startSimulation();
            }

            initializeData() {
                if (!localStorage.getItem('chatbotMetrics')) {
                    const initialMetrics = {
                        totalConversations: 1247,
                        categories: {
                            'pos-error': 450,
                            'kiosk-issue': 320,
                            'payment-terminal': 280,
                            'installation': 197
                        },
                        dailyData: {},
                        hourlyData: {},
                        // 각 카테고리별 첫 응답 정확도 (correct/total)
                        categoryAccuracy: {
                            'pos-error': { correct: 382, total: 450 },      // 85%
                            'kiosk-issue': { correct: 294, total: 320 },    // 92%
                            'payment-terminal': { correct: 246, total: 280 }, // 88%
                            'installation': { correct: 179, total: 197 }     // 91%
                        },
                        // 평균 응답시간 (초)
                        avgResponseTime: 1.8
                    };

                    // 30일간 일일 데이터 생성 (현실적인 패턴)
                    for (let i = 0; i < 30; i++) {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        const dateStr = date.toDateString();
                        // 주말에는 문의가 적고, 평일에는 많은 패턴
                        const dayOfWeek = date.getDay();
                        const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
                        const baseAmount = isWeekend ? 25 : 45;
                        initialMetrics.dailyData[dateStr] = baseAmount + Math.floor(Math.random() * 20);
                    }

                    // 24시간 데이터 생성 (업무시간에 집중)
                    for (let i = 0; i < 24; i++) {
                        let baseAmount;
                        if (i >= 9 && i <= 18) { // 업무시간
                            baseAmount = 20 + Math.floor(Math.random() * 25);
                        } else if (i >= 19 && i <= 22) { // 저녁시간
                            baseAmount = 10 + Math.floor(Math.random() * 15);
                        } else { // 새벽/심야
                            baseAmount = Math.floor(Math.random() * 8);
                        }
                        initialMetrics.hourlyData[i] = baseAmount;
                    }

                    localStorage.setItem('chatbotMetrics', JSON.stringify(initialMetrics));
                }

                if (!localStorage.getItem('feedbackData')) {
                    // 현실적인 피드백 비율: 90% 긍정, 10% 부정
                    const initialFeedback = {
                        helpful: 456,    // 90%
                        notHelpful: 52,  // 10%
                        total: 508       // 전체 문의의 약 40%가 피드백 제공
                    };
                    localStorage.setItem('feedbackData', JSON.stringify(initialFeedback));
                }
            }

            startSimulation() {
                // 10초마다 새로운 대화 (실제 환경에서는 더 드물게)
                setInterval(() => {
                    this.addRandomConversation();
                }, 10000);

                // 30초마다 피드백 추가 (대화보다 덜 빈번)
                setInterval(() => {
                    this.addRandomFeedback();
                }, 30000);

                // 1분마다 응답시간 업데이트
                setInterval(() => {
                    this.updateResponseTime();
                }, 60000);
            }

            addRandomConversation() {
                const metrics = JSON.parse(localStorage.getItem('chatbotMetrics') || '{}');
                const today = new Date().toDateString();
                const currentHour = new Date().getHours();

                // 이 대화 수 증가
                metrics.totalConversations = (metrics.totalConversations || 0) + 1;

                // 일일 데이터 업데이트
                metrics.dailyData = metrics.dailyData || {};
                metrics.dailyData[today] = (metrics.dailyData[today] || 0) + 1;

                // 시간대별 데이터 업데이트
                metrics.hourlyData = metrics.hourlyData || {};
                metrics.hourlyData[currentHour] = (metrics.hourlyData[currentHour] || 0) + 1;

                // 랜덤 카테고리 선택 (현실적인 분포)
                const categories = ['pos-error', 'kiosk-issue', 'payment-terminal', 'installation'];
                const weights = [0.36, 0.26, 0.23, 0.15]; // POS 오류가 가장 많음
                const randomCategory = this.weightedRandomChoice(categories, weights);
                
                metrics.categories = metrics.categories || {};
                metrics.categories[randomCategory] = (metrics.categories[randomCategory] || 0) + 1;

                // 첫 응답 정확도 시뮬레이션
                metrics.categoryAccuracy = metrics.categoryAccuracy || {};
                if (!metrics.categoryAccuracy[randomCategory]) {
                    metrics.categoryAccuracy[randomCategory] = { correct: 0, total: 0 };
                }
                
                metrics.categoryAccuracy[randomCategory].total += 1;
                
                // 카테고리별 정확도 확률 (POS가 가장 어려움)
                const accuracyRates = {
                    'pos-error': 0.85,
                    'kiosk-issue': 0.92,
                    'payment-terminal': 0.88,
                    'installation': 0.91
                };
                
                if (Math.random() < accuracyRates[randomCategory]) {
                    metrics.categoryAccuracy[randomCategory].correct += 1;
                }

                localStorage.setItem('chatbotMetrics', JSON.stringify(metrics));

                if (window.sidebarManager) {
                    window.sidebarManager.loadMetricsFromStorage();
                }
            }

            addRandomFeedback() {
                const feedback = JSON.parse(localStorage.getItem('feedbackData') || '{}');

                // 90% 확률로 긍정 피드백 (현실적)
                const isPositive = Math.random() > 0.1;
                
                if (isPositive) {
                    feedback.helpful = (feedback.helpful || 0) + 1;
                } else {
                    feedback.notHelpful = (feedback.notHelpful || 0) + 1;
                }
                
                feedback.total = (feedback.total || 0) + 1;

                localStorage.setItem('feedbackData', JSON.stringify(feedback));

                if (window.sidebarManager) {
                    window.sidebarManager.loadMetricsFromStorage();
                }
            }

            updateResponseTime() {
                const metrics = JSON.parse(localStorage.getItem('chatbotMetrics') || '{}');
                
                // 응답시간은 1.5~2.5초 사이에서 변동
                const currentTime = metrics.avgResponseTime || 1.8;
                const variation = (Math.random() - 0.5) * 0.2; // ±0.1초 변동
                const newTime = Math.max(1.2, Math.min(2.8, currentTime + variation));
                
                metrics.avgResponseTime = Math.round(newTime * 10) / 10; // 소수점 1자리
                
                localStorage.setItem('chatbotMetrics', JSON.stringify(metrics));

                if (window.sidebarManager) {
                    window.sidebarManager.loadMetricsFromStorage();
                }
            }

            // 가중치 기반 랜덤 선택
            weightedRandomChoice(items, weights) {
                const totalWeight = weights.reduce((a, b) => a + b, 0);
                let randomNum = Math.random() * totalWeight;
                
                for (let i = 0; i < items.length; i++) {
                    if (randomNum < weights[i]) {
                        return items[i];
                    }
                    randomNum -= weights[i];
                }
                return items[items.length - 1];
            }
        }

        // DOM 로드 완료 시 초기화
        document.addEventListener('DOMContentLoaded', () => {
            // 로딩 오버레이 숨기기
            const loadingOverlay = document.getElementById('loadingOverlay');
            if (loadingOverlay) {
                setTimeout(() => {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 300);
                }, 500);
            }
            
            // 관리자 시스템 초기화
            window.sidebarManager = new SidebarManager();
            window.chartManager = new ChartManager();
            window.metricsSimulator = new MetricsSimulator();

            // 차트 기간 변경 이벤트
            const trendPeriodSelect = document.getElementById('trendPeriod');
            if (trendPeriodSelect) {
                trendPeriodSelect.addEventListener('change', (e) => {
                    window.chartManager.updateTrendPeriod(parseInt(e.target.value));
                });
            }
        });

        // 페이지 언로드 시 정리
        window.addEventListener('beforeunload', () => {
            if (window.sidebarManager) {
                // 필요한 정리 작업
            }
        });
    </script>
</body>
</html>